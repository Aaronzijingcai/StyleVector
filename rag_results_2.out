Loading checkpoint shards:   0%|          | 0/2 [00:00<?, ?it/s]Loading checkpoint shards:  50%|█████     | 1/2 [00:06<00:06,  6.20s/it]Loading checkpoint shards: 100%|██████████| 2/2 [00:07<00:00,  3.18s/it]Loading checkpoint shards: 100%|██████████| 2/2 [00:07<00:00,  3.63s/it]
Device set to use cuda:3
Generating RAG-based reviews:   0%|          | 0/1822 [00:00<?, ? examples/s]Asking to truncate to max_length but no maximum length is provided and the model has no predefined maximum length. Default to no truncation.
/home/caizijing/miniconda3/envs/ai/lib/python3.11/site-packages/transformers/generation/configuration_utils.py:628: UserWarning: `do_sample` is set to `False`. However, `temperature` is set to `0.6` -- this flag is only used in sample-based generation modes. You should set `do_sample=True` or unset `temperature`.
  warnings.warn(
/home/caizijing/miniconda3/envs/ai/lib/python3.11/site-packages/transformers/generation/configuration_utils.py:633: UserWarning: `do_sample` is set to `False`. However, `top_p` is set to `0.9` -- this flag is only used in sample-based generation modes. You should set `do_sample=True` or unset `top_p`.
  warnings.warn(
Generating RAG-based reviews:   1%|          | 16/1822 [04:03<7:37:33, 15.20s/ examples]Generating RAG-based reviews:   2%|▏         | 32/1822 [09:10<8:43:28, 17.55s/ examples]Generating RAG-based reviews:   3%|▎         | 48/1822 [13:29<8:20:34, 16.93s/ examples]Generating RAG-based reviews:   4%|▎         | 64/1822 [17:13<7:41:57, 15.77s/ examples]Generating RAG-based reviews:   4%|▍         | 80/1822 [21:37<7:45:31, 16.03s/ examples]This is a friendly reminder - the current text generation call will exceed the model's predefined maximum length (4096). Depending on the model, you may observe exceptions, performance degradation, or nothing at all.
Generating RAG-based reviews:   5%|▌         | 96/1822 [25:59<7:44:48, 16.16s/ examples]Generating RAG-based reviews:   6%|▌         | 112/1822 [31:31<8:23:18, 17.66s/ examples]Generating RAG-based reviews:   7%|▋         | 128/1822 [34:26<7:18:17, 15.52s/ examples]Generating RAG-based reviews:   8%|▊         | 144/1822 [38:43<7:18:35, 15.68s/ examples]Generating RAG-based reviews:   9%|▉         | 160/1822 [43:49<7:43:55, 16.75s/ examples]You seem to be using the pipelines sequentially on GPU. In order to maximize efficiency please use a dataset
Generating RAG-based reviews:  10%|▉         | 176/1822 [49:09<8:06:51, 17.75s/ examples]Generating RAG-based reviews:  11%|█         | 192/1822 [53:52<8:01:42, 17.73s/ examples]Generating RAG-based reviews:  11%|█▏        | 208/1822 [58:43<8:00:24, 17.86s/ examples]Generating RAG-based reviews:  12%|█▏        | 224/1822 [1:03:16<7:49:12, 17.62s/ examples]Generating RAG-based reviews:  13%|█▎        | 240/1822 [1:08:38<8:04:20, 18.37s/ examples]Generating RAG-based reviews:  14%|█▍        | 256/1822 [1:13:49<8:07:54, 18.69s/ examples]Generating RAG-based reviews:  15%|█▍        | 272/1822 [1:20:44<8:59:27, 20.88s/ examples]Generating RAG-based reviews:  16%|█▌        | 288/1822 [1:25:42<8:36:34, 20.20s/ examples]Generating RAG-based reviews:  17%|█▋        | 304/1822 [1:31:52<8:53:25, 21.08s/ examples]Generating RAG-based reviews:  18%|█▊        | 320/1822 [1:37:27<8:46:44, 21.04s/ examples]Generating RAG-based reviews:  18%|█▊        | 336/1822 [1:41:52<8:07:43, 19.69s/ examples]Generating RAG-based reviews:  19%|█▉        | 352/1822 [1:46:55<7:56:58, 19.47s/ examples]Generating RAG-based reviews:  20%|██        | 368/1822 [1:52:09<7:52:38, 19.50s/ examples]Generating RAG-based reviews:  21%|██        | 384/1822 [1:56:24<7:21:43, 18.43s/ examples]Generating RAG-based reviews:  22%|██▏       | 400/1822 [2:01:23<7:18:46, 18.51s/ examples]Generating RAG-based reviews:  23%|██▎       | 416/1822 [2:06:29<7:18:08, 18.70s/ examples]Generating RAG-based reviews:  24%|██▎       | 432/1822 [2:11:44<7:19:52, 18.99s/ examples]Generating RAG-based reviews:  25%|██▍       | 448/1822 [2:18:01<7:46:25, 20.37s/ examples]Generating RAG-based reviews:  25%|██▌       | 464/1822 [2:21:55<7:02:06, 18.65s/ examples]Generating RAG-based reviews:  26%|██▋       | 480/1822 [2:24:33<5:58:13, 16.02s/ examples]Generating RAG-based reviews:  27%|██▋       | 496/1822 [2:31:39<7:04:03, 19.19s/ examples]Generating RAG-based reviews:  28%|██▊       | 512/1822 [2:35:31<6:28:19, 17.79s/ examples]Generating RAG-based reviews:  29%|██▉       | 528/1822 [2:39:40<6:09:06, 17.11s/ examples]Generating RAG-based reviews:  30%|██▉       | 544/1822 [2:43:52<5:56:01, 16.71s/ examples]Generating RAG-based reviews:  31%|███       | 560/1822 [2:47:27<5:30:51, 15.73s/ examples]Generating RAG-based reviews:  32%|███▏      | 576/1822 [2:53:09<6:01:50, 17.42s/ examples]Generating RAG-based reviews:  32%|███▏      | 592/1822 [2:57:01<5:39:15, 16.55s/ examples]Generating RAG-based reviews:  33%|███▎      | 608/1822 [3:03:41<6:25:54, 19.07s/ examples]Generating RAG-based reviews:  34%|███▍      | 624/1822 [3:09:28<6:36:49, 19.87s/ examples]Generating RAG-based reviews:  35%|███▌      | 640/1822 [3:13:26<6:01:53, 18.37s/ examples]Generating RAG-based reviews:  36%|███▌      | 656/1822 [3:19:29<6:22:12, 19.67s/ examples]Generating RAG-based reviews:  37%|███▋      | 672/1822 [3:24:39<6:15:18, 19.58s/ examples]Generating RAG-based reviews:  38%|███▊      | 688/1822 [3:28:57<5:50:17, 18.53s/ examples]Generating RAG-based reviews:  39%|███▊      | 704/1822 [3:33:31<5:37:27, 18.11s/ examples]Generating RAG-based reviews:  40%|███▉      | 720/1822 [3:38:53<5:43:41, 18.71s/ examples]Generating RAG-based reviews:  40%|████      | 736/1822 [3:44:10<5:44:44, 19.05s/ examples]Generating RAG-based reviews:  41%|████▏     | 752/1822 [3:49:06<5:36:44, 18.88s/ examples]Generating RAG-based reviews:  42%|████▏     | 768/1822 [3:52:26<4:58:12, 16.98s/ examples]Generating RAG-based reviews:  43%|████▎     | 784/1822 [3:56:08<4:37:38, 16.05s/ examples]Generating RAG-based reviews:  44%|████▍     | 800/1822 [3:58:38<3:59:11, 14.04s/ examples]Generating RAG-based reviews:  45%|████▍     | 816/1822 [4:04:06<4:27:54, 15.98s/ examples]Generating RAG-based reviews:  46%|████▌     | 832/1822 [4:06:59<3:57:53, 14.42s/ examples]Generating RAG-based reviews:  47%|████▋     | 848/1822 [4:12:59<4:33:22, 16.84s/ examples]Generating RAG-based reviews:  47%|████▋     | 864/1822 [4:19:53<5:12:13, 19.55s/ examples]Generating RAG-based reviews:  48%|████▊     | 880/1822 [4:26:32<5:32:34, 21.18s/ examples]Generating RAG-based reviews:  49%|████▉     | 896/1822 [4:32:21<5:29:44, 21.37s/ examples]Generating RAG-based reviews:  50%|█████     | 912/1822 [4:35:30<4:40:33, 18.50s/ examples]Generating RAG-based reviews:  51%|█████     | 928/1822 [4:41:12<4:48:21, 19.35s/ examples]Generating RAG-based reviews:  52%|█████▏    | 944/1822 [4:46:28<4:45:00, 19.48s/ examples]Generating RAG-based reviews:  53%|█████▎    | 960/1822 [4:51:14<4:33:02, 19.01s/ examples]Generating RAG-based reviews:  54%|█████▎    | 976/1822 [4:55:08<4:09:26, 17.69s/ examples]Generating RAG-based reviews:  54%|█████▍    | 992/1822 [5:01:09<4:24:57, 19.15s/ examples]Generating RAG-based reviews:  55%|█████▌    | 1008/1822 [5:07:07<4:32:48, 20.11s/ examples]Generating RAG-based reviews:  56%|█████▌    | 1024/1822 [5:12:26<4:26:47, 20.06s/ examples]Generating RAG-based reviews:  57%|█████▋    | 1040/1822 [5:16:09<3:57:28, 18.22s/ examples]Generating RAG-based reviews:  58%|█████▊    | 1056/1822 [5:20:41<3:48:00, 17.86s/ examples]Generating RAG-based reviews:  59%|█████▉    | 1072/1822 [5:26:34<3:59:00, 19.12s/ examples]Generating RAG-based reviews:  60%|█████▉    | 1088/1822 [5:31:04<3:45:35, 18.44s/ examples]Generating RAG-based reviews:  61%|██████    | 1104/1822 [5:34:10<3:16:10, 16.39s/ examples]Generating RAG-based reviews:  61%|██████▏   | 1120/1822 [5:38:27<3:10:46, 16.31s/ examples]Generating RAG-based reviews:  62%|██████▏   | 1136/1822 [5:43:28<3:14:54, 17.05s/ examples]Generating RAG-based reviews:  63%|██████▎   | 1152/1822 [5:46:36<2:52:35, 15.46s/ examples]Generating RAG-based reviews:  64%|██████▍   | 1168/1822 [5:52:42<3:12:45, 17.68s/ examples]Generating RAG-based reviews:  65%|██████▍   | 1184/1822 [5:58:30<3:21:09, 18.92s/ examples]Generating RAG-based reviews:  66%|██████▌   | 1200/1822 [6:04:10<3:23:15, 19.61s/ examples]Generating RAG-based reviews:  67%|██████▋   | 1216/1822 [6:08:06<3:03:18, 18.15s/ examples]Generating RAG-based reviews:  68%|██████▊   | 1232/1822 [6:12:48<2:56:54, 17.99s/ examples]Generating RAG-based reviews:  68%|██████▊   | 1248/1822 [6:19:35<3:13:26, 20.22s/ examples]Generating RAG-based reviews:  69%|██████▉   | 1264/1822 [6:23:00<2:47:25, 18.00s/ examples]Generating RAG-based reviews:  70%|███████   | 1280/1822 [6:27:25<2:38:46, 17.58s/ examples]Generating RAG-based reviews:  71%|███████   | 1296/1822 [6:33:00<2:42:53, 18.58s/ examples]Generating RAG-based reviews:  72%|███████▏  | 1312/1822 [6:37:35<2:34:25, 18.17s/ examples]Generating RAG-based reviews:  73%|███████▎  | 1328/1822 [6:40:40<2:13:13, 16.18s/ examples]Generating RAG-based reviews:  74%|███████▍  | 1344/1822 [6:46:42<2:24:16, 18.11s/ examples]Generating RAG-based reviews:  75%|███████▍  | 1360/1822 [6:49:24<2:01:01, 15.72s/ examples]Generating RAG-based reviews:  76%|███████▌  | 1376/1822 [6:54:07<2:01:19, 16.32s/ examples]Generating RAG-based reviews:  76%|███████▋  | 1392/1822 [6:58:04<1:53:37, 15.86s/ examples]Generating RAG-based reviews:  77%|███████▋  | 1408/1822 [7:03:08<1:55:56, 16.80s/ examples]Generating RAG-based reviews:  78%|███████▊  | 1424/1822 [7:07:48<1:52:53, 17.02s/ examples]Generating RAG-based reviews:  79%|███████▉  | 1440/1822 [7:12:59<1:52:56, 17.74s/ examples]Generating RAG-based reviews:  80%|███████▉  | 1456/1822 [7:18:28<1:53:22, 18.59s/ examples]Generating RAG-based reviews:  81%|████████  | 1472/1822 [7:24:42<1:56:49, 20.03s/ examples]Generating RAG-based reviews:  82%|████████▏ | 1488/1822 [7:29:13<1:46:18, 19.10s/ examples]Generating RAG-based reviews:  83%|████████▎ | 1504/1822 [7:32:52<1:32:33, 17.46s/ examples]Generating RAG-based reviews:  83%|████████▎ | 1520/1822 [7:36:37<1:22:48, 16.45s/ examples]Generating RAG-based reviews:  84%|████████▍ | 1536/1822 [7:43:30<1:31:49, 19.26s/ examples]Generating RAG-based reviews:  85%|████████▌ | 1552/1822 [7:48:14<1:24:37, 18.81s/ examples]Generating RAG-based reviews:  86%|████████▌ | 1568/1822 [7:52:45<1:17:14, 18.24s/ examples]Generating RAG-based reviews:  87%|████████▋ | 1584/1822 [7:57:54<1:13:38, 18.57s/ examples]Generating RAG-based reviews:  88%|████████▊ | 1600/1822 [8:00:50<1:00:17, 16.29s/ examples]Generating RAG-based reviews:  89%|████████▊ | 1616/1822 [8:06:35<1:01:22, 17.88s/ examples]Generating RAG-based reviews:  90%|████████▉ | 1632/1822 [8:12:08<59:25, 18.76s/ examples]  Generating RAG-based reviews:  90%|█████████ | 1648/1822 [8:18:37<59:14, 20.43s/ examples]Generating RAG-based reviews:  91%|█████████▏| 1664/1822 [8:23:23<51:44, 19.65s/ examples]Generating RAG-based reviews:  92%|█████████▏| 1680/1822 [8:28:28<46:07, 19.49s/ examples]Generating RAG-based reviews:  93%|█████████▎| 1696/1822 [8:33:45<41:07, 19.59s/ examples]Generating RAG-based reviews:  94%|█████████▍| 1712/1822 [8:37:54<33:40, 18.37s/ examples]Generating RAG-based reviews:  95%|█████████▍| 1728/1822 [8:44:43<32:09, 20.53s/ examples]Generating RAG-based reviews:  96%|█████████▌| 1744/1822 [8:49:18<25:23, 19.53s/ examples]Generating RAG-based reviews:  97%|█████████▋| 1760/1822 [8:55:22<21:11, 20.50s/ examples]Generating RAG-based reviews:  97%|█████████▋| 1776/1822 [8:58:18<13:31, 17.64s/ examples]Generating RAG-based reviews:  98%|█████████▊| 1792/1822 [9:03:03<08:51, 17.70s/ examples]Generating RAG-based reviews:  99%|█████████▉| 1808/1822 [9:08:55<04:25, 18.98s/ examples]Generating RAG-based reviews: 100%|██████████| 1822/1822 [9:12:41<00:00, 18.21s/ examples]Generating RAG-based reviews: 100%|██████████| 1822/1822 [9:12:41<00:00, 18.20s/ examples]
Average ROUGE-L: 0.0964
Average METEOR: 0.0979
